<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1116px" preserveAspectRatio="none" style="width:2243px;height:1116px;" version="1.1" viewBox="0 0 2243 1116" width="2243px" zoomAndPan="magnify"><defs><filter height="300%" id="f1bru5fw2ecojk" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="307" x="968.75" y="26.708">'curl_easy_send' sequence diagram</text><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="954.0547" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="417" y="104.3828"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="821.6563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="422" y="215.7813"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="446.5938" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="427" y="257.9141"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="919" y="157.6484"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="919" y="819.0391"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1025" y="355.3125"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1025" y="647.5078"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="172.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1139.5" y="421.4453"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1956.5" y="559.2422"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2081" y="885.1719"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2081" y="987.4375"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2186.5" y="944.3047"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="60.2656" style="stroke: #000000; stroke-width: 2.0;" width="608.5" x="371" y="119.3828"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="76.2656" style="stroke: #000000; stroke-width: 2.0;" width="719.5" x="371" y="317.0469"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="60.2656" style="stroke: #000000; stroke-width: 2.0;" width="955" x="1080.5" y="520.9766"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="76.2656" style="stroke: #000000; stroke-width: 2.0;" width="719.5" x="371" y="609.2422"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="130.5313" style="stroke: #000000; stroke-width: 2.0;" width="746.5" x="233" y="726.5078"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="422" x2="422" y1="73.25" y2="1076.4375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="923.5" x2="923.5" y1="73.25" y2="1076.4375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1029.5" x2="1029.5" y1="73.25" y2="1076.4375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1144.5" x2="1144.5" y1="73.25" y2="1076.4375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1961.5" x2="1961.5" y1="73.25" y2="1076.4375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2085.5" x2="2085.5" y1="73.25" y2="1076.4375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2191.5" x2="2191.5" y1="73.25" y2="1076.4375"/><rect fill="#FEFECE" filter="url(#f1bru5fw2ecojk)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="381" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="388" y="57.9482">lib/easy.c</text><rect fill="#FEFECE" filter="url(#f1bru5fw2ecojk)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="381" y="1075.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="388" y="1095.4326">lib/easy.c</text><rect fill="#FEFECE" filter="url(#f1bru5fw2ecojk)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="878.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="885.5" y="57.9482">lib/multiif.h</text><rect fill="#FEFECE" filter="url(#f1bru5fw2ecojk)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="878.5" y="1075.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="885.5" y="1095.4326">lib/multiif.h</text><rect fill="#FEFECE" filter="url(#f1bru5fw2ecojk)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="979.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="986.5" y="57.9482">lib/curl_trc.h</text><rect fill="#FEFECE" filter="url(#f1bru5fw2ecojk)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="979.5" y="1075.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="986.5" y="1095.4326">lib/curl_trc.h</text><rect fill="#FEFECE" filter="url(#f1bru5fw2ecojk)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1090.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1097.5" y="57.9482">lib/connect.h</text><rect fill="#FEFECE" filter="url(#f1bru5fw2ecojk)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1090.5" y="1075.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1097.5" y="1095.4326">lib/connect.h</text><rect fill="#FEFECE" filter="url(#f1bru5fw2ecojk)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="1897.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1904.5" y="57.9482">lib/conncache.h</text><rect fill="#FEFECE" filter="url(#f1bru5fw2ecojk)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="1897.5" y="1075.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1904.5" y="1095.4326">lib/conncache.h</text><rect fill="#FEFECE" filter="url(#f1bru5fw2ecojk)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="2035.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="2042.5" y="57.9482">lib/sigpipe.h</text><rect fill="#FEFECE" filter="url(#f1bru5fw2ecojk)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="2035.5" y="1075.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="2042.5" y="1095.4326">lib/sigpipe.h</text><rect fill="#FEFECE" filter="url(#f1bru5fw2ecojk)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="2146.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="2153.5" y="57.9482">lib/sendf.h</text><rect fill="#FEFECE" filter="url(#f1bru5fw2ecojk)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="2146.5" y="1075.4375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="2153.5" y="1095.4326">lib/sendf.h</text><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="954.0547" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="417" y="104.3828"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="821.6563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="422" y="215.7813"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="446.5938" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="427" y="257.9141"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="919" y="157.6484"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="919" y="819.0391"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1025" y="355.3125"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1025" y="647.5078"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="172.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1139.5" y="421.4453"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1956.5" y="559.2422"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2081" y="885.1719"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2081" y="987.4375"/><rect fill="#FFFFFF" filter="url(#f1bru5fw2ecojk)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2186.5" y="944.3047"/><polygon fill="#A80036" points="405,100.3828,415,104.3828,405,108.3828,409,104.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="411" y1="104.3828" y2="104.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="395" x="10" y="99.3169">curl_easy_send(struct Curl_easy *,const void *,size_t,size_t *)</text><path d="M371,119.3828 L435,119.3828 L435,126.3828 L425,136.3828 L371,136.3828 L371,119.3828 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="60.2656" style="stroke: #000000; stroke-width: 2.0;" width="608.5" x="371" y="119.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="386" y="132.4497">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="169" x="450" y="131.5933">[Curl_is_in_callback(data)]</text><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1294" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1294" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="907,153.6484,917,157.6484,907,161.6484,911,157.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="427" x2="913" y1="157.6484" y2="157.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="6" x="434" y="152.5825">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="440" y="152.5825">Curl_is_in_callback(struct Curl_easy *)</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="6" x="682" y="152.5825">]</text></a><polygon fill="#A80036" points="438,167.6484,428,171.6484,438,175.6484,434,171.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="432" x2="923" y1="171.6484" y2="171.6484"/><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1297" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1297" xlink:show="new" xlink:title="" xlink:type="simple"><line style="stroke: #A80036; stroke-width: 1.0;" x1="427" x2="474" y1="202.7813" y2="202.7813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="474" x2="474" y1="202.7813" y2="215.7813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="433" x2="474" y1="215.7813" y2="215.7813"/><polygon fill="#A80036" points="443,211.7813,433,215.7813,443,219.7813,439,215.7813" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="396" x="439" y="197.7153">Curl_senddata(struct Curl_easy *,const void *,size_t,ssize_t *)</text></a><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1259" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1259" xlink:show="new" xlink:title="" xlink:type="simple"><line style="stroke: #A80036; stroke-width: 1.0;" x1="432" x2="479" y1="244.9141" y2="244.9141"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="479" x2="479" y1="244.9141" y2="257.9141"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="438" x2="479" y1="257.9141" y2="257.9141"/><polygon fill="#A80036" points="448,253.9141,438,257.9141,448,261.9141,444,257.9141" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="473" x="444" y="239.8481">easy_connection(struct Curl_easy *,curl_socket_t *,struct connectdata **)</text></a><path d="M181,275.9141 L181,300.9141 L658,300.9141 L658,285.9141 L648,275.9141 L181,275.9141 " fill="#FBFB77" filter="url(#f1bru5fw2ecojk)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M648,275.9141 L648,285.9141 L658,285.9141 L648,275.9141 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="456" x="187" y="292.981">only allow these to be called on handles with CURLOPT_CONNECT_ONLY</text><path d="M371,317.0469 L435,317.0469 L435,324.0469 L425,334.0469 L371,334.0469 L371,317.0469 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="76.2656" style="stroke: #000000; stroke-width: 2.0;" width="719.5" x="371" y="317.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="386" y="330.1138">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="450" y="329.2573">[!data-&gt;set.connect_only]</text><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1176" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1176" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="1013,351.3125,1023,355.3125,1013,359.3125,1017,355.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="437" x2="1019" y1="355.3125" y2="355.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="444" y="350.2466">Curl_failf(struct Curl_easy *,const char *)</text></a><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1180" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1180" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="1127.5,417.4453,1137.5,421.4453,1127.5,425.4453,1131.5,421.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="437" x2="1133.5" y1="421.4453" y2="421.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="394" x="444" y="416.3794">Curl_getconnectinfo(struct Curl_easy *,struct connectdata **)</text></a><path d="M965,434.4453 L965,504.4453 L1319,504.4453 L1319,444.4453 L1309,434.4453 L965,434.4453 " fill="#FBFB77" filter="url(#f1bru5fw2ecojk)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1309,434.4453 L1309,444.4453 L1319,444.4453 L1309,434.4453 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="326" x="971" y="451.5122">this works for an easy handle: - that has been used</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="971" y="466.645">for curl_easy_perform() - that is associated with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="333" x="971" y="481.7778">a multi handle, and whose connection was detached</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="971" y="496.9106">with CURLOPT_CONNECT_ONLY</text><path d="M1080.5,520.9766 L1144.5,520.9766 L1144.5,527.9766 L1134.5,537.9766 L1080.5,537.9766 L1080.5,520.9766 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="60.2656" style="stroke: #000000; stroke-width: 2.0;" width="955" x="1080.5" y="520.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1095.5" y="534.0435">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="468" x="1159.5" y="533.187">[(data-&gt;state.lastconnect_id != -1) &amp;&amp; (data-&gt;multi_easy || data-&gt;multi)]</text><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/connect.c#L281" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/connect.c#L281" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="1944.5,555.2422,1954.5,559.2422,1944.5,563.2422,1948.5,559.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1149.5" x2="1950.5" y1="559.2422" y2="559.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="788" x="1156.5" y="554.1763">Curl_conncache_foreach(struct Curl_easy *,struct conncache *,void *,int (*)(struct Curl_easy *,struct connectdata *,void *))</text></a><polygon fill="#A80036" points="1160.5,569.2422,1150.5,573.2422,1160.5,577.2422,1156.5,573.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1154.5" x2="1960.5" y1="573.2422" y2="573.2422"/><polygon fill="#A80036" points="448,590.2422,438,594.2422,448,598.2422,444,594.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="442" x2="1143.5" y1="594.2422" y2="594.2422"/><path d="M371,609.2422 L435,609.2422 L435,616.2422 L425,626.2422 L371,626.2422 L371,609.2422 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="76.2656" style="stroke: #000000; stroke-width: 2.0;" width="719.5" x="371" y="609.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="386" y="622.3091">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185" x="450" y="621.4526">[*sfd == CURL_SOCKET_BAD]</text><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1183" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1183" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="1013,643.5078,1023,647.5078,1013,651.5078,1017,647.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="437" x2="1019" y1="647.5078" y2="647.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="444" y="642.4419">Curl_failf(struct Curl_easy *,const char *)</text></a><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="437" x2="479" y1="703.5078" y2="703.5078"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="479" x2="479" y1="703.5078" y2="716.5078"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="432" x2="479" y1="716.5078" y2="716.5078"/><polygon fill="#A80036" points="442,712.5078,432,716.5078,442,720.5078,438,716.5078" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M233,726.5078 L297,726.5078 L297,733.5078 L287,743.5078 L233,743.5078 L233,726.5078 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="130.5313" style="stroke: #000000; stroke-width: 2.0;" width="746.5" x="233" y="726.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="248" y="739.5747">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="312" y="738.7183">[!data-&gt;conn]</text><path d="M243,748.6406 L243,788.6406 L597,788.6406 L597,758.6406 L587,748.6406 L243,748.6406 " fill="#FBFB77" filter="url(#f1bru5fw2ecojk)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M587,748.6406 L587,758.6406 L597,758.6406 L587,748.6406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="333" x="249" y="765.7075">on first invoke, the transfer has been detached from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="277" x="249" y="780.8403">the connection and needs to be reattached</text><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1266" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1266" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="907,815.0391,917,819.0391,907,823.0391,911,819.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="432" x2="913" y1="819.0391" y2="819.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="410" x="439" y="813.9731">Curl_attach_connection(struct Curl_easy *,struct connectdata *)</text></a><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1269" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1269" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="2069,881.1719,2079,885.1719,2069,889.1719,2073,885.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="432" x2="2075" y1="885.1719" y2="885.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="364" x="439" y="880.106">sigpipe_ignore(struct Curl_easy *,struct sigpipe_ignore *)</text></a><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1270" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1270" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="2174.5,940.3047,2184.5,944.3047,2174.5,948.3047,2178.5,944.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="432" x2="2180.5" y1="944.3047" y2="944.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="454" x="439" y="939.2388">Curl_write(struct Curl_easy *,curl_socket_t,const void *,size_t,ssize_t *)</text></a><polygon fill="#A80036" points="443,954.3047,433,958.3047,443,962.3047,439,958.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="437" x2="2190.5" y1="958.3047" y2="958.3047"/><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1271" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1271" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="2069,983.4375,2079,987.4375,2069,991.4375,2073,987.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="432" x2="2075" y1="987.4375" y2="987.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="439" y="982.3716">sigpipe_restore(struct sigpipe_ignore *)</text></a><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="432" x2="474" y1="1036.4375" y2="1036.4375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="474" x2="474" y1="1036.4375" y2="1049.4375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="427" x2="474" y1="1049.4375" y2="1049.4375"/><polygon fill="#A80036" points="437,1045.4375,427,1049.4375,437,1053.4375,433,1049.4375" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="14,1054.4375,4,1058.4375,14,1062.4375,10,1058.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="421" y1="1058.4375" y2="1058.4375"/><!--MD5=[2da807974218caa4f17cd781b64fbb29]
@startuml
title 'curl_easy_send' sequence diagram
participant "lib/easy.c" as C_0000988842405508541997
[-> C_0000988842405508541997 : curl_easy_send(struct Curl_easy *,const void *,size_t,size_t *)
activate C_0000988842405508541997
alt Curl_is_in_callback(data)
participant "lib/multiif.h" as C_0001679646781133597440
C_0000988842405508541997 -> C_0001679646781133597440 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1294{}]] : **[**Curl_is_in_callback(struct Curl_easy *)**]**
activate C_0001679646781133597440
C_0001679646781133597440 - -> C_0000988842405508541997
deactivate C_0001679646781133597440
end
C_0000988842405508541997 -> C_0000988842405508541997 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1297{}]] : Curl_senddata(struct Curl_easy *,const void *,size_t,ssize_t *)
activate C_0000988842405508541997
C_0000988842405508541997 -> C_0000988842405508541997 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1259{}]] : easy_connection(struct Curl_easy *,curl_socket_t *,struct connectdata **)
activate C_0000988842405508541997
note over C_0000988842405508541997
only allow these to be called on handles with CURLOPT_CONNECT_ONLY
end note
alt !data->set.connect_only
participant "lib/curl_trc.h" as C_0001823084709546168225
C_0000988842405508541997 -> C_0001823084709546168225 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1176{}]] : Curl_failf(struct Curl_easy *,const char *)
activate C_0001823084709546168225
deactivate C_0001823084709546168225
end
participant "lib/connect.h" as C_0000405510344894985718
C_0000988842405508541997 -> C_0000405510344894985718 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1180{}]] : Curl_getconnectinfo(struct Curl_easy *,struct connectdata **)
activate C_0000405510344894985718
note over C_0000405510344894985718
this works for an easy handle: - that has been used
for curl_easy_perform() - that is associated with
a multi handle, and whose connection was detached
with CURLOPT_CONNECT_ONLY
end note
alt (data->state.lastconnect_id != -1) && (data->multi_easy || data->multi)
participant "lib/conncache.h" as C_0001466729356487497419
C_0000405510344894985718 -> C_0001466729356487497419 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/connect.c#L281{}]] : Curl_conncache_foreach(struct Curl_easy *,struct conncache *,void *,int (*)(struct Curl_easy *,struct connectdata *,void *))
activate C_0001466729356487497419
C_0001466729356487497419 - -> C_0000405510344894985718
deactivate C_0001466729356487497419
end
C_0000405510344894985718 - -> C_0000988842405508541997
deactivate C_0000405510344894985718
alt *sfd == CURL_SOCKET_BAD
C_0000988842405508541997 -> C_0001823084709546168225 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1183{}]] : Curl_failf(struct Curl_easy *,const char *)
activate C_0001823084709546168225
deactivate C_0001823084709546168225
end
C_0000988842405508541997 - -> C_0000988842405508541997
deactivate C_0000988842405508541997
alt !data->conn
note over C_0000988842405508541997
on first invoke, the transfer has been detached from
the connection and needs to be reattached
end note
C_0000988842405508541997 -> C_0001679646781133597440 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1266{}]] : Curl_attach_connection(struct Curl_easy *,struct connectdata *)
activate C_0001679646781133597440
deactivate C_0001679646781133597440
end
participant "lib/sigpipe.h" as C_0000874673245831337321
C_0000988842405508541997 -> C_0000874673245831337321 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1269{}]] : sigpipe_ignore(struct Curl_easy *,struct sigpipe_ignore *)
activate C_0000874673245831337321
deactivate C_0000874673245831337321
participant "lib/sendf.h" as C_0001833444421952963910
C_0000988842405508541997 -> C_0001833444421952963910 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1270{}]] : Curl_write(struct Curl_easy *,curl_socket_t,const void *,size_t,ssize_t *)
activate C_0001833444421952963910
C_0001833444421952963910 - -> C_0000988842405508541997
deactivate C_0001833444421952963910
C_0000988842405508541997 -> C_0000874673245831337321 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1271{}]] : sigpipe_restore(struct sigpipe_ignore *)
activate C_0000874673245831337321
deactivate C_0000874673245831337321
C_0000988842405508541997 - -> C_0000988842405508541997
deactivate C_0000988842405508541997
[<- - C_0000988842405508541997
deactivate C_0000988842405508541997

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.21+9-post-Ubuntu-0ubuntu122.04
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>