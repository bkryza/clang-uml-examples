<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="929px" preserveAspectRatio="none" style="width:2084px;height:929px;" version="1.1" viewBox="0 0 2084 929" width="2084px" zoomAndPan="magnify"><defs><filter height="300%" id="flziawz4o5buu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="305" x="890.25" y="26.708">'curl_easy_recv' sequence diagram</text><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="766.6563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="104.3828"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="446.5938" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="215.7813"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="871" y="157.6484"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="871" y="776.9063"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="977" y="313.1797"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="977" y="605.375"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="172.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1091.5" y="379.3125"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1908.5" y="517.1094"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2027.5" y="843.0391"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="60.2656" style="stroke: #000000; stroke-width: 2.0;" width="603.5" x="328" y="119.3828"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="76.2656" style="stroke: #000000; stroke-width: 2.0;" width="714.5" x="328" y="274.9141"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="60.2656" style="stroke: #000000; stroke-width: 2.0;" width="955" x="1032.5" y="478.8438"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="76.2656" style="stroke: #000000; stroke-width: 2.0;" width="714.5" x="328" y="567.1094"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="130.5313" style="stroke: #000000; stroke-width: 2.0;" width="741.5" x="190" y="684.375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="379" x2="379" y1="73.25" y2="889.0391"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="875.5" x2="875.5" y1="73.25" y2="889.0391"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="981.5" x2="981.5" y1="73.25" y2="889.0391"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1096.5" x2="1096.5" y1="73.25" y2="889.0391"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1913.5" x2="1913.5" y1="73.25" y2="889.0391"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2032.5" x2="2032.5" y1="73.25" y2="889.0391"/><rect fill="#FEFECE" filter="url(#flziawz4o5buu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="338" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="345" y="57.9482">lib/easy.c</text><rect fill="#FEFECE" filter="url(#flziawz4o5buu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="338" y="888.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="345" y="908.0342">lib/easy.c</text><rect fill="#FEFECE" filter="url(#flziawz4o5buu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="830.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="837.5" y="57.9482">lib/multiif.h</text><rect fill="#FEFECE" filter="url(#flziawz4o5buu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="830.5" y="888.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="837.5" y="908.0342">lib/multiif.h</text><rect fill="#FEFECE" filter="url(#flziawz4o5buu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="931.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="938.5" y="57.9482">lib/curl_trc.h</text><rect fill="#FEFECE" filter="url(#flziawz4o5buu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="931.5" y="888.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="938.5" y="908.0342">lib/curl_trc.h</text><rect fill="#FEFECE" filter="url(#flziawz4o5buu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1042.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1049.5" y="57.9482">lib/connect.h</text><rect fill="#FEFECE" filter="url(#flziawz4o5buu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1042.5" y="888.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1049.5" y="908.0342">lib/connect.h</text><rect fill="#FEFECE" filter="url(#flziawz4o5buu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="1849.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1856.5" y="57.9482">lib/conncache.h</text><rect fill="#FEFECE" filter="url(#flziawz4o5buu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="1849.5" y="888.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1856.5" y="908.0342">lib/conncache.h</text><rect fill="#FEFECE" filter="url(#flziawz4o5buu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="1987.5" y="37.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="1994.5" y="57.9482">lib/sendf.h</text><rect fill="#FEFECE" filter="url(#flziawz4o5buu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="1987.5" y="888.0391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="1994.5" y="908.0342">lib/sendf.h</text><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="766.6563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="374" y="104.3828"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="446.5938" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="379" y="215.7813"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="871" y="157.6484"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="871" y="776.9063"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="977" y="313.1797"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="977" y="605.375"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="172.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1091.5" y="379.3125"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1908.5" y="517.1094"/><rect fill="#FFFFFF" filter="url(#flziawz4o5buu)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2027.5" y="843.0391"/><polygon fill="#A80036" points="362,100.3828,372,104.3828,362,108.3828,366,104.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="368" y1="104.3828" y2="104.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="352" x="10" y="99.3169">curl_easy_recv(struct Curl_easy *,void *,size_t,size_t *)</text><path d="M328,119.3828 L392,119.3828 L392,126.3828 L382,136.3828 L328,136.3828 L328,119.3828 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="60.2656" style="stroke: #000000; stroke-width: 2.0;" width="603.5" x="328" y="119.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="343" y="132.4497">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="169" x="407" y="131.5933">[Curl_is_in_callback(data)]</text><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1203" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1203" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="859,153.6484,869,157.6484,859,161.6484,863,157.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="865" y1="157.6484" y2="157.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="6" x="391" y="152.5825">[</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="397" y="152.5825">Curl_is_in_callback(struct Curl_easy *)</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="6" x="639" y="152.5825">]</text></a><polygon fill="#A80036" points="395,167.6484,385,171.6484,395,175.6484,391,171.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="389" x2="875" y1="171.6484" y2="171.6484"/><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1206" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1206" xlink:show="new" xlink:title="" xlink:type="simple"><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="431" y1="202.7813" y2="202.7813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="431" x2="431" y1="202.7813" y2="215.7813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="390" x2="431" y1="215.7813" y2="215.7813"/><polygon fill="#A80036" points="400,211.7813,390,215.7813,400,219.7813,396,215.7813" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="473" x="396" y="197.7153">easy_connection(struct Curl_easy *,curl_socket_t *,struct connectdata **)</text></a><path d="M138,233.7813 L138,258.7813 L615,258.7813 L615,243.7813 L605,233.7813 L138,233.7813 " fill="#FBFB77" filter="url(#flziawz4o5buu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M605,233.7813 L605,243.7813 L615,243.7813 L605,233.7813 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="456" x="144" y="250.8481">only allow these to be called on handles with CURLOPT_CONNECT_ONLY</text><path d="M328,274.9141 L392,274.9141 L392,281.9141 L382,291.9141 L328,291.9141 L328,274.9141 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="76.2656" style="stroke: #000000; stroke-width: 2.0;" width="714.5" x="328" y="274.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="343" y="287.981">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="407" y="287.1245">[!data-&gt;set.connect_only]</text><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1176" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1176" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="965,309.1797,975,313.1797,965,317.1797,969,313.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="971" y1="313.1797" y2="313.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="396" y="308.1138">Curl_failf(struct Curl_easy *,const char *)</text></a><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1180" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1180" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="1079.5,375.3125,1089.5,379.3125,1079.5,383.3125,1083.5,379.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="1085.5" y1="379.3125" y2="379.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="394" x="396" y="374.2466">Curl_getconnectinfo(struct Curl_easy *,struct connectdata **)</text></a><path d="M917,392.3125 L917,462.3125 L1271,462.3125 L1271,402.3125 L1261,392.3125 L917,392.3125 " fill="#FBFB77" filter="url(#flziawz4o5buu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1261,392.3125 L1261,402.3125 L1271,402.3125 L1261,392.3125 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="326" x="923" y="409.3794">this works for an easy handle: - that has been used</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="304" x="923" y="424.5122">for curl_easy_perform() - that is associated with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="333" x="923" y="439.645">a multi handle, and whose connection was detached</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="199" x="923" y="454.7778">with CURLOPT_CONNECT_ONLY</text><path d="M1032.5,478.8438 L1096.5,478.8438 L1096.5,485.8438 L1086.5,495.8438 L1032.5,495.8438 L1032.5,478.8438 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="60.2656" style="stroke: #000000; stroke-width: 2.0;" width="955" x="1032.5" y="478.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1047.5" y="491.9106">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="468" x="1111.5" y="491.0542">[(data-&gt;state.lastconnect_id != -1) &amp;&amp; (data-&gt;multi_easy || data-&gt;multi)]</text><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/connect.c#L281" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/connect.c#L281" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="1896.5,513.1094,1906.5,517.1094,1896.5,521.1094,1900.5,517.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1101.5" x2="1902.5" y1="517.1094" y2="517.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="788" x="1108.5" y="512.0435">Curl_conncache_foreach(struct Curl_easy *,struct conncache *,void *,int (*)(struct Curl_easy *,struct connectdata *,void *))</text></a><polygon fill="#A80036" points="1112.5,527.1094,1102.5,531.1094,1112.5,535.1094,1108.5,531.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1106.5" x2="1912.5" y1="531.1094" y2="531.1094"/><polygon fill="#A80036" points="400,548.1094,390,552.1094,400,556.1094,396,552.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="394" x2="1095.5" y1="552.1094" y2="552.1094"/><path d="M328,567.1094 L392,567.1094 L392,574.1094 L382,584.1094 L328,584.1094 L328,567.1094 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="76.2656" style="stroke: #000000; stroke-width: 2.0;" width="714.5" x="328" y="567.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="343" y="580.1763">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185" x="407" y="579.3198">[*sfd == CURL_SOCKET_BAD]</text><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1183" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1183" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="965,601.375,975,605.375,965,609.375,969,605.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="389" x2="971" y1="605.375" y2="605.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="396" y="600.3091">Curl_failf(struct Curl_easy *,const char *)</text></a><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="389" x2="431" y1="661.375" y2="661.375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="431" x2="431" y1="661.375" y2="674.375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="384" x2="431" y1="674.375" y2="674.375"/><polygon fill="#A80036" points="394,670.375,384,674.375,394,678.375,390,674.375" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M190,684.375 L254,684.375 L254,691.375 L244,701.375 L190,701.375 L190,684.375 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="130.5313" style="stroke: #000000; stroke-width: 2.0;" width="741.5" x="190" y="684.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="205" y="697.4419">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="269" y="696.5854">[!data-&gt;conn]</text><path d="M200,706.5078 L200,746.5078 L554,746.5078 L554,716.5078 L544,706.5078 L200,706.5078 " fill="#FBFB77" filter="url(#flziawz4o5buu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M544,706.5078 L544,716.5078 L554,716.5078 L544,706.5078 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="333" x="206" y="723.5747">on first invoke, the transfer has been detached from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="277" x="206" y="738.7075">the connection and needs to be reattached</text><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1213" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1213" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="859,772.9063,869,776.9063,859,780.9063,863,776.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="865" y1="776.9063" y2="776.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="410" x="391" y="771.8403">Curl_attach_connection(struct Curl_easy *,struct connectdata *)</text></a><a href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1216" target="_top" title="" xlink:actuate="onRequest" xlink:href="https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1216" xlink:show="new" xlink:title="" xlink:type="simple"><polygon fill="#A80036" points="2015.5,839.0391,2025.5,843.0391,2015.5,847.0391,2019.5,843.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="384" x2="2021.5" y1="843.0391" y2="843.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="416" x="391" y="837.9731">Curl_read(struct Curl_easy *,curl_socket_t,char *,size_t,ssize_t *)</text></a><polygon fill="#A80036" points="395,853.0391,385,857.0391,395,861.0391,391,857.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="389" x2="2031.5" y1="857.0391" y2="857.0391"/><polygon fill="#A80036" points="14,867.0391,4,871.0391,14,875.0391,10,871.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="378" y1="871.0391" y2="871.0391"/><!--MD5=[1953655dfc0ad39f0446fa6b0ff01f63]
@startuml
title 'curl_easy_recv' sequence diagram
participant "lib/easy.c" as C_0000988842405508541997
[-> C_0000988842405508541997 : curl_easy_recv(struct Curl_easy *,void *,size_t,size_t *)
activate C_0000988842405508541997
alt Curl_is_in_callback(data)
participant "lib/multiif.h" as C_0001679646781133597440
C_0000988842405508541997 -> C_0001679646781133597440 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1203{}]] : **[**Curl_is_in_callback(struct Curl_easy *)**]**
activate C_0001679646781133597440
C_0001679646781133597440 - -> C_0000988842405508541997
deactivate C_0001679646781133597440
end
C_0000988842405508541997 -> C_0000988842405508541997 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1206{}]] : easy_connection(struct Curl_easy *,curl_socket_t *,struct connectdata **)
activate C_0000988842405508541997
note over C_0000988842405508541997
only allow these to be called on handles with CURLOPT_CONNECT_ONLY
end note
alt !data->set.connect_only
participant "lib/curl_trc.h" as C_0001823084709546168225
C_0000988842405508541997 -> C_0001823084709546168225 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1176{}]] : Curl_failf(struct Curl_easy *,const char *)
activate C_0001823084709546168225
deactivate C_0001823084709546168225
end
participant "lib/connect.h" as C_0000405510344894985718
C_0000988842405508541997 -> C_0000405510344894985718 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1180{}]] : Curl_getconnectinfo(struct Curl_easy *,struct connectdata **)
activate C_0000405510344894985718
note over C_0000405510344894985718
this works for an easy handle: - that has been used
for curl_easy_perform() - that is associated with
a multi handle, and whose connection was detached
with CURLOPT_CONNECT_ONLY
end note
alt (data->state.lastconnect_id != -1) && (data->multi_easy || data->multi)
participant "lib/conncache.h" as C_0001466729356487497419
C_0000405510344894985718 -> C_0001466729356487497419 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/connect.c#L281{}]] : Curl_conncache_foreach(struct Curl_easy *,struct conncache *,void *,int (*)(struct Curl_easy *,struct connectdata *,void *))
activate C_0001466729356487497419
C_0001466729356487497419 - -> C_0000405510344894985718
deactivate C_0001466729356487497419
end
C_0000405510344894985718 - -> C_0000988842405508541997
deactivate C_0000405510344894985718
alt *sfd == CURL_SOCKET_BAD
C_0000988842405508541997 -> C_0001823084709546168225 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1183{}]] : Curl_failf(struct Curl_easy *,const char *)
activate C_0001823084709546168225
deactivate C_0001823084709546168225
end
C_0000988842405508541997 - -> C_0000988842405508541997
deactivate C_0000988842405508541997
alt !data->conn
note over C_0000988842405508541997
on first invoke, the transfer has been detached from
the connection and needs to be reattached
end note
C_0000988842405508541997 -> C_0001679646781133597440 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1213{}]] : Curl_attach_connection(struct Curl_easy *,struct connectdata *)
activate C_0001679646781133597440
deactivate C_0001679646781133597440
end
participant "lib/sendf.h" as C_0001833444421952963910
C_0000988842405508541997 -> C_0001833444421952963910 [[https://github.com/curl/curl/blob/5691a6cf363242da38bd7e469b13a2e741a295c6/lib/easy.c#L1216{}]] : Curl_read(struct Curl_easy *,curl_socket_t,char *,size_t,ssize_t *)
activate C_0001833444421952963910
C_0001833444421952963910 - -> C_0000988842405508541997
deactivate C_0001833444421952963910
[<- - C_0000988842405508541997
deactivate C_0000988842405508541997

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.21+9-post-Ubuntu-0ubuntu122.04
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>